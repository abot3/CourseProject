{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Corpus Information{% endblock %}</h1>
{% endblock %}

{% block content %}
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type=text/javascript>
    //$(function() {
      //$('a#test').on('click', function(e) {
        //e.preventDefault()
        //$.getJSON('/background_fetch_corpus_data',
            //function(data) {
          ////do nothing
        //});
        //return false;
      //});
    //});

    const listen_for_corpus_data = event => {
      const corpusDiv = document.getElementById('corpus_div');
      for (child in corpusDiv.childNodes()) {
        if (child.tagName() == 'p') {
          child.remove()
        }
      }
      $.getJSON('{{ url_for('topics.background_fetch_corpus_data') }}',
            function(data) {
          //do nothing
        for (doc in response) {
          console.log("Successfully requested JSON data")
          const p = document.createElement('p');
          p.innerText = `Name: ${doc.name}\nSteps:${doc.steps}\n` +
                        `Description:${doc.description}\nIngredients:${doc.ingredients}\n`
                        `Tags:${doc.tags}`
          corpusDiv.appendChild(p)
        }
      }).fail(function() {
        console.log("Failed to get JSON data from /background_fetch_corpus_data.");
      });
      //for (json row in response) {
      const p = document.createElement('p');
      p.innerText = "Displaying corpus data.";
      corpusDiv.appendChild(p)
      // }
      // document.querySelector('#container').appendChild(p);
    };
  </script>
  {#
    <form method="post">
      <label for="username">Username</label>
      <input name="username" id="username" required>
      <label for="password">Password</label>
      <input type="password" name="password" id="password" required>
      <input type="submit" value="Register">
    </form>
  #}

  <p>Number of Documents {{ data["n_docs"] }}</br>
    Average doc length {{ data["avg_doc_length"] }}</br>
    Number of topics {{ data["num_topics"] }}</br>
  </p>
  <h2>Corpus Sample</h2>
  <div id="corpus_div">
    <button type="button" onclick="alert('Hello world!')">Click Me!</button>
    <button onclick="listen_for_corpus_data()" id="button">Click to display corpus data</button>
  </div>
  {% for n in range(10) %}
    {#
      {% for line in check[n][2:] %}
        <p> {{ beta[0][0] }} </p>
      {% endfor %}
    #}
    <p>item {{n}} from dataframe</p>
  {% endfor %}
{% endblock %}